<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Example Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="examples.html">Examples</a> &nbsp; </center>
<hr><h1>realFFTExample.cc</h1> This is an example of how to use the class. It transforms a sine tone stored in the .dat file and saves the in, out, and power_spectrum results of using the class
<p>
<div class="fragment"><pre><span class="comment">/* Copyright 2001,2002 Matt Flax &lt;flatmax@ieee.org&gt;</span>
<span class="comment">   This file is part of the MFFM FFTw Wrapper library.</span>
<span class="comment"></span>
<span class="comment">   MFFM MFFM FFTw Wrapper library is free software; you can </span>
<span class="comment">   redistribute it and/or modify</span>
<span class="comment">   it under the terms of the GNU General Public License as published by</span>
<span class="comment">   the Free Software Foundation; either version 2 of the License, or</span>
<span class="comment">   (at your option) any later version.</span>
<span class="comment">   </span>
<span class="comment">   MFFM FFTw Wrapper library is distributed in the hope that it will be useful,</span>
<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="comment">   GNU General Public License for more details.</span>
<span class="comment">   </span>
<span class="comment">   You have received a copy of the GNU General Public License</span>
<span class="comment">   along with the MFFM FFTw Wrapper library</span>
<span class="comment">*/</span>
<span class="preprocessor">#include &lt;fstream&gt;</span>
<span class="preprocessor">#include &lt;iomanip&gt;</span>

<span class="preprocessor">#include &lt;mffm/realFFT.H&gt;</span>

<span class="preprocessor">#define INPUTFILE "sine.1000Hz.dat"</span>
<span class="preprocessor"></span><span class="preprocessor">#define OUTPUTFILE "powerSpectrum.txt"</span>
<span class="preprocessor"></span><span class="preprocessor">#define OUTPUTFILE1 "in.txt"</span>
<span class="preprocessor"></span><span class="preprocessor">#define OUTPUTFILE2 "out.txt"</span>
<span class="preprocessor"></span>
<span class="keywordtype">int</span> main (<span class="keywordtype">void</span>){
  ifstream input(INPUTFILE);
  ofstream output(OUTPUTFILE);
  ofstream output1(OUTPUTFILE1);
  ofstream output2(OUTPUTFILE2);
  <span class="keywordtype">int</span> count=0;
  <span class="keywordtype">double</span> var;
  <span class="comment">// Get the file size and check file exists ....</span>
  <span class="keywordflow">if</span> (!input){
    cout &lt;&lt;<span class="stringliteral">"input not opened !"</span>&lt;&lt;endl;
    exit(-1);
  }
  <span class="keywordflow">while</span> (input &gt;&gt; var)
    count++;
  <span class="comment">//input.close();</span>
  
  cout&lt;&lt;count&lt;&lt;<span class="stringliteral">" variables in file "</span>&lt;&lt;INPUTFILE&lt;&lt;endl;

  <span class="comment">//input.open(INPUTFILE);</span>
  input.clear();
  input.seekg(0);
 
  <a name="_a0"></a><a class="code" href="classrealFFTData.html">realFFTData</a> fftData(count);
  <a name="_a1"></a><a class="code" href="classrealFFT.html">realFFT</a> rfft(&amp;fftData);

  <span class="comment">// read data into data and rdata :</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;count; i++)
    input &gt;&gt; fftData.<a name="a2"></a><a class="code" href="classrealFFTData.html#m3">in</a>[i];
  input.close();

  <span class="comment">// forward transform :</span>
  rfft.<a name="a3"></a><a class="code" href="classrealFFT.html#a4">fwdTransform</a>();

  <span class="comment">// Find the power spectrum ...</span>
  fftData.<a name="a4"></a><a class="code" href="classrealFFTData.html#a8">compPowerSpec</a>();
  <span class="comment">/*</span>
<span class="comment">  // inverse transform to check what happens (have to rescale too): </span>
<span class="comment">  rfft.invTransform();</span>
<span class="comment">  */</span>
  <span class="comment">// output to file :</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;(count+1)/2; i++){
    output &lt;&lt; fftData.<a name="a5"></a><a class="code" href="classrealFFTData.html#m5">power_spectrum</a>[i]&lt;&lt;<span class="charliteral">'\n'</span>;
  }
  <span class="comment">//  cout &lt;&lt;(count+1)/2&lt;&lt;endl;</span>
  output.close();

  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;count; i++){
    output1 &lt;&lt; fftData.<a class="code" href="classrealFFTData.html#m3">in</a>[i]&lt;&lt;<span class="charliteral">'\n'</span>;
    output2 &lt;&lt; fftData.<a name="a6"></a><a class="code" href="classrealFFTData.html#m4">out</a>[i]&lt;&lt;<span class="charliteral">'\n'</span>;
  }
  output1.close();
  output2.close();
  <span class="keywordflow">return</span> 0;
}
</pre></div><hr><address style="align: right;"><small>Generated on Thu Jun 19 11:21:56 2003 for MFFM FFTw Wrapper by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
